<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Phonegap Touchpoint Reference : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Phonegap Touchpoint Reference</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/elasticpath/phonegap-touchpoint-reference">View on GitHub</a>

          <h1 id="project_title">Phonegap Touchpoint Reference</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/elasticpath/phonegap-touchpoint-reference/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/elasticpath/phonegap-touchpoint-reference/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="phonegap-touchpoint-for-reference-storefront" class="anchor" href="#phonegap-touchpoint-for-reference-storefront"><span class="octicon octicon-link"></span></a>PhoneGap Touchpoint for Reference Storefront</h1>

<p>This is a PhoneGap application to accompany <a href="https://github.elasticpath.net/cortex/ui-storefront">Elastic Path's HTML5 Reference Storefront</a>.</p>

<h1>
<a name="prerequisites" class="anchor" href="#prerequisites"><span class="octicon octicon-link"></span></a>Prerequisites</h1>

<p>The PhoneGap application requires the following installed:</p>

<ul>
<li><a href="http://nodejs.org/">NodeJS</a></li>
</ul><h6>
<a name="android-only" class="anchor" href="#android-only"><span class="octicon octicon-link"></span></a>Android only:</h6>

<ul>
<li><a href="http://developer.android.com/sdk/index.html">Android SDK</a></li>
<li><a href="http://ant.apache.org/">Apache Ant</a></li>
</ul><p>The installed locations of the Android SDK and Apache Ant must also be in your PATH variable (adjust the precise directory paths below according to their installed locations):</p>

<p>On Windows, append the following to your PATH variable:</p>

<pre><code>;C:\Development\adt-bundle\sdk\platform-tools;C:\Development\adt-bundle\sdk\tools;C:\Development\apache-ant\bin
</code></pre>

<p>On Mac, add the following line to your ~/.bash_profile file:</p>

<pre><code>export PATH=${PATH}:/Development/adt-bundle/sdk/platform-tools:/Development/adt-bundle/sdk/tools
</code></pre>

<h1>
<a name="building-the-apps" class="anchor" href="#building-the-apps"><span class="octicon octicon-link"></span></a>Building the Apps</h1>

<ol>
<li>Checkout the PhoneGap application source from <a href="https://github.elasticpath.net/cortex/phonegap-poc">GitHub</a> to a local directory.</li>
<li><strong>All further commands need to be executed at the command prompt while within this directory.</strong></li>
<li>Install all required Node modules globally:
<pre>
<code>[sudo] npm install â€“g grunt-cli cordova phonegap</code>
</pre>
</li>
<li>Install the required modules locally:
<pre>
<code>npm install</code>
</pre>
</li>
<li>Delete any existing files (except .gitignore) from the ep-src folder and copy the latest <a href="https://github.elasticpath.net/cortex/ui-storefront">HTML5 reference storefront code</a> into that folder.</li>
<li>Ensure <code>/ep-src/public/ep.config.json</code> has the correct values for <code>cortexApi.path</code> and <code>cortexApi.scope</code>.</li>
<li>
<strong>(Android)</strong> Make the following file changes (where C:/Development/adt-bundle/sdk should be replaced with the path to your local Android SDK installation):
<p><code>/ep-mobile/platforms/android/build.xml</code> (line 90)</p>
<pre>
<code>&lt;import file="C:/Development/adt-bundle/sdk/tools/ant/build.xml" /&gt;</code>
</pre>
<hr>
<p><code>/ep-mobile/platforms/android/CordovaLib/build.xml</code> (line 90)</p>
<pre>
<code>&lt;import file="C:/Development/adt-bundle/sdk/tools/ant/build.xml" /&gt;</code>
</pre>
<hr>
<p><code>/ep-mobile/platforms/android/local.properties</code> (line 10)</p>
<pre>
<code>sdk.dir=C:/Development/adt-bundle/sdk</code>
</pre>
<hr>
<p><code>/ep-mobile/platforms/android/CordovaLib/local.properties</code> (line 10)</p>
<pre>
<code>sdk.dir=C:/Development/adt-bundle/sdk</code>
</pre>
</li>
<li>Run: 
<pre>
<code>grunt dist</code>
</pre>
This copies the latest code from the ep-src folder into the PhoneGap project.</li>
<li>Build the app:
<p><strong>Android</strong></p>
<pre>
<code>grunt build:android</code>
</pre>
<p><strong>iOS</strong></p>
<pre>
<code>grunt build:ios</code>
</pre>
</li>
</ol><h1>
<a name="running-in-an-emulator" class="anchor" href="#running-in-an-emulator"><span class="octicon octicon-link"></span></a>Running in an Emulator</h1>

<h6>
<a name="android" class="anchor" href="#android"><span class="octicon octicon-link"></span></a>Android</h6>

<p>Start an <a href="http://developer.android.com/tools/help/emulator.html">Android Virtual Device</a> and run:</p>

<p><code>grunt emulate:android</code></p>

<h6>
<a name="ios" class="anchor" href="#ios"><span class="octicon octicon-link"></span></a>iOS</h6>

<p>Run the app with device simulators from Xcode using the project at <code>/ep-mobile/platforms/ios/HTML5 Storefront.xcodeproj</code></p>

<h1>
<a name="installing-to-a-device" class="anchor" href="#installing-to-a-device"><span class="octicon octicon-link"></span></a>Installing to a Device</h1>

<h6>
<a name="android-1" class="anchor" href="#android-1"><span class="octicon octicon-link"></span></a>Android</h6>

<p>The Android package file will be generated at <code>/ep-mobile/platforms/android/bin/ElasticPathMobile-debug.apk</code></p>

<h6>
<a name="ios-1" class="anchor" href="#ios-1"><span class="octicon octicon-link"></span></a>iOS</h6>

<p>Using the Xcode project at <code>/ep-mobile/platforms/ios/HTML5 Storefront.xcodeproj</code>, the iOS app can be deployed to a registered device using a valid Apple Developer provisioning profile, see <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/TestingYouriOSApp/TestingYouriOSApp.html">this article</a> for further instructions.</p>

<h1>
<a name="known-issues" class="anchor" href="#known-issues"><span class="octicon octicon-link"></span></a>Known Issues</h1>

<h6>
<a name="localized-strings-in-the-ios-simulator" class="anchor" href="#localized-strings-in-the-ios-simulator"><span class="octicon octicon-link"></span></a>Localized strings in the iOS simulator</h6>

<p>Some localized strings do not not load when the iOS app is run in the iOS simulator. Instead, the tokens used to identify the strings will appear e.g. the profile link will display the text 'auth.profile' instead of 'Profile'.</p>

<h1>
<a name="troubleshooting" class="anchor" href="#troubleshooting"><span class="octicon octicon-link"></span></a>Troubleshooting</h1>

<h6>
<a name="missing-store-categories" class="anchor" href="#missing-store-categories"><span class="octicon octicon-link"></span></a>Missing store categories</h6>

<p>If the store categories do not appear in the menu, check that:</p>

<ol>
<li>the <code>INTEGRATOR_URL</code> variable in <code>Gruntfile.js</code> references a valid Cortex deployment</li>
<li>the <code>cortexApi.path</code> and <code>cortexApi.scope</code> settings are correct in the <code>/ep-mobile/www/ep-config.json</code> JSON file that is generated during the build task</li>
</ol><p><br></p>

<h6>
<a name="building-the-apps-with-html5-reference-storefront-version-19-and-earlier" class="anchor" href="#building-the-apps-with-html5-reference-storefront-version-19-and-earlier"><span class="octicon octicon-link"></span></a>Building the apps with HTML5 Reference Storefront version 1.9 and earlier</h6>

<p>In order to work with these versions of the reference storefront, the following code change is required:</p>

<p>In <code>ui-storefront/public/ep.client.js</code>, the following line in the <code>ep.io.getApiContext</code> function:</p>

<pre>
<code>retVal = '/' + config.cortexApi.path;</code>
</pre>

<p>should be replaced with:</p>

<pre>
<code>if (/^http/.test(config.cortexApi.path)) {
  retVal = config.cortexApi.path;
} else {
  retVal = '/' + config.cortexApi.path;
}</code>
</pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Phonegap Touchpoint Reference maintained by <a href="https://github.com/elasticpath">elasticpath</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
